<% cache(@shops) do %>
  
  <p id="notice"><%= notice %></p>

  <h1>Shops</h1>

  <p>
      <div id="map"></div>
  </p>

  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Latitude</th>
        <th>Longitude</th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @shops.each do |shop| %>
        <tr>
          <td><%= shop.name %></td>
          <td><%= shop.latitude %></td>
          <td><%= shop.longitude %></td>
          <td><%= link_to 'Show', shop %></td>
          <td><%= link_to 'Edit', edit_shop_path(shop) %></td>
          <td><%= link_to 'Destroy', shop, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <br>
<% end %>
<%= link_to 'New Shop', new_shop_path %>

</br>
<div>Icons made by <a href="https://www.freepik.com/" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" 			    title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" 			    title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a></div>

<% provide :head_tags do %>
      <script>
      document.addEventListener("DOMContentLoaded", function(){
          initMap(<%=@lats.to_json.html_safe%>, <%=@lngs.to_json.html_safe%>, <%=@names.to_json.html_safe%>, <%=@categories.to_json.html_safe%>)
      });
      </script>
  <% end %>
